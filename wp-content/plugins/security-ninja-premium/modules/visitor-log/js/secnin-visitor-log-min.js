var secninUpdateTimeout,WindowGotFocus=function(){jQuery("#secnin-visitor-log-container").removeClass("unfocused"),jQuery("#secnin_enable_live").prop("disabled",!1),jQuery("#secnin-visitor-log-unfocused").fadeOut(),jQuery(window).one("blur",WindowLostFocus),updateVisitorTable()},WindowLostFocus=function(){jQuery("#enablecontainer #loadingspinner").removeClass("is-active"),jQuery("#secnin-visitor-log-unfocused").fadeIn(),jQuery("#secnin-visitor-log-container").addClass("unfocused"),jQuery("#secnin_enable_live").prop("disabled",!0),jQuery(window).one("focus",WindowGotFocus),clearTimeout(secninUpdateTimeout)},updateVisitorTable=function(){if(document.hasFocus()){var e=!1;if(!0===jQuery("#secnin_enable_live").prop("checked")&&(e=!0),e){var n={action:"secnin_get_visitors",current:parseInt(jQuery("#secnin_vl_latestid").text()),_ajax_nonce:secnin_vl.vl_nonce};jQuery("#loadingspinner").addClass("is-active"),jQuery("#secnin-visitor-log .newrow").removeClass("newrow"),jQuery.ajax({url:ajaxurl,type:"GET",data:n,success:function(e){(jQuery("#loadingspinner").removeClass("is-active"),e.data.current&&jQuery("#secnin_vl_latestid").text(e.data.current),e.data.visits)&&(e.data.visits.forEach((e=>{var n=jQuery(e);n.hide(),jQuery("#secnin-visitor-log tbody").prepend(n),n.fadeIn("slow")})),jQuery("#secnin-visitor-log > tbody > tr").slice(0,50))},error:function(){}})}}clearTimeout(secninUpdateTimeout),secninUpdateTimeout=setTimeout(updateVisitorTable,1e4)};jQuery(document).ready((function($){jQuery(window).one("focus",WindowGotFocus),jQuery(document).on("click",".secnin-banip",(function(e){if(e.preventDefault(),!confirm(secnin_vl.areyousureblockip))return!1;var n={action:"secnin_vl_banip",_ajax_nonce:jQuery(this).data("nonce"),banip:jQuery(this).data("banip")};return $.post(ajaxurl,n,(function(e){e.success&&updateVisitorTable()})),!1})),updateVisitorTable()}));