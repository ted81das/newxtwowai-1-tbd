"use strict";jQuery(document).ready((function($){function e(e){jQuery("#wf-sn-core-scanner-response").show(),jQuery("#wf-sn-core-scanner-response #sn-cs-results").slideUp(),jQuery("#wf-sn-core-scanner-response #last_scan").slideUp(),jQuery("#wf-sn-core-scanner-response .spinner").addClass("is-active");var s={action:"sn_core_run_scan",_ajax_nonce:wf_sn_cs.nonce};e&&(s.doupdate=!0),$.post(ajaxurl,s,(function(e){jQuery("#wf-sn-core-scanner-response .spinner").removeClass("is-active"),e.data.out&&jQuery("#wf-sn-core-scanner-response").append(e.data.out).slideDown(),e.data.last_scan&&jQuery("#wf-sn-core-scanner-response #last_scan").html(e.data.last_scan).slideDown()}),"json")}e(),$("button.sn-show-source").on("click",(function(){return $($(this).attr("href")).dialog("option",{title:wf_sn_cs.strings.file_source+": "+$(this).attr("data-file"),file_path:$(this).attr("data-file"),file_hash:$(this).attr("data-hash")}).dialog("open"),!1})),$(document).on("click","button.sn-restore-source",(function(s){if(s.preventDefault(),!confirm(wf_sn_cs.strings.confirm_restore))return!1;jQuery(this).attr("disabled","disabled");var n=jQuery(this).attr("data-file"),r=jQuery(this).attr("data-hash");jQuery.post(ajaxurl,{action:"sn_core_restore_file_do",_ajax_nonce:wf_sn_cs.nonce,filename:n,filehash:r},(function(s){s.success?(jQuery('[data-hash="'+r+'"]').closest("li").fadeOut("slow",(function(){jQuery(this).remove(),e(!0)})),jQuery("#wf-sn-core-scanner-response").append("<p>"+s.data.message+"</p>")):(jQuery("#wf-sn-core-scanner-response").append('<p class="error">'+wf_sn_cs.strings.error_occurred+": "+s.data.message+"</p>"),jQuery(this).removeAttr("disabled"))}),"json")})),$(document).on("click","button.sn-delete-source",(function(e){if(e.preventDefault(),!confirm(wf_sn_cs.strings.confirm_delete))return!1;jQuery(this).attr("disabled","disabled");var s=jQuery(this).attr("data-file"),n=jQuery(this).attr("data-hash");jQuery.post(ajaxurl,{action:"sn_core_delete_file_do",_ajax_nonce:wf_sn_cs.nonce,filename:s,filehash:n},(function(e){e.success?jQuery('[data-hash="'+n+'"]').closest("li").fadeOut("slow",(function(){jQuery(this).remove()})):(alert(wf_sn_cs.strings.error_occurred+": "+e),jQuery(this).attr("disabled",""))}),"json")})),$(document).on("click","button.sn-delete-all-files",(function(e){if(e.preventDefault(),!confirm(wf_sn_cs.strings.confirm_delete_all))return!1;jQuery(this).attr("disabled","disabled"),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"sn_core_delete_all_unknowns",_ajax_nonce:wf_sn_cs.delete_all_nonce},success:function(){window.location.reload()},error:function(){alert(wf_sn_cs.strings.ajax_error)}})})),$(document).on("click","#sn-run-core-scan",(function(e){e.preventDefault(),jQuery("#wf-sn-core-scanner-response #sn-cs-results").slideUp(),jQuery("#wf-sn-core-scanner-response #last_scan").slideUp(),jQuery("#wf-sn-core-scanner-response .spinner").addClass("is-active"),jQuery.post(ajaxurl,{action:"sn_core_run_scan",_ajax_nonce:wf_sn_cs.nonce,datatype:"json",doupdate:!0},(function(e){jQuery("#wf-sn-core-scanner-response .spinner").removeClass("is-active"),e.data.out&&jQuery("#wf-sn-core-scanner-response").append(e.data.out).slideDown(),e.data.last_scan&&jQuery("#wf-sn-core-scanner-response #last_scan").html(e.data.last_scan).slideDown()}))}))}));