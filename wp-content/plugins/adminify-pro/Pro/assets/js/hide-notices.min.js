(()=>{"use strict";!function(e,t){({container:null,counter_link:null,migration_delay:100,migration_interval:null,migration_start:0,migration_limit:5e3,removal_interval:null,system_messages:[],init:function(){var t=this,i=this,n=34;e(".woocommerce-layout__header").length>0&&(n+=e(".woocommerce-layout__header").height()),e("body").append('<div id="adminify-container-slide-in" style="background-color: '+WP_ADMINIFY_HIDE_NOTICES.settings.slide_in_background+"; padding-top: "+n+'px;"><div id="adminify-slide-in-content"><div id="adminify-system-notices"></div><div id="adminify-error-notices"></div><div id="adminify-warning-notices"></div><div id="adminify-success-notices"></div><div id="adminify-information-notices"></div></div></div>'),this.container=e("#adminify-slide-in-content"),this.counter_link=e("#wp-admin-bar-adminify_notification_count"),this.initTriggers(),this.migration_start=(new Date).getTime(),this.migration_interval=setInterval((function(){t.transferNotices()}),this.migration_delay);var a=0,o=setInterval((function(){3===(a+=1)&&i.CheckAndStoreNotices(),4===a&&clearInterval(o)}),150)},getCurrentCounterValue:function(){var t=e(".adminify-notification-counter span.count");return 0==t.length?0:parseInt(t.html(),10)},getNoticeType:function(t){var i=e(t);return i.hasClass("notice-system")?"system":i.hasClass("notice-error")?"error":i.hasClass("notice-info")||i.hasClass("notice-information")?"information":i.hasClass("notice-warning")?"warning":i.hasClass("notice-success")||i.hasClass("updated")?"success":"no"},checkMigrationInterval:function(){if((new Date).getTime()-this.migration_start>this.migration_limit){clearInterval(this.migration_interval),this.migration_interval=null,this.CheckAndStoreNotices();var t=e(".adminify-notices-wrapper");t.children(this.getIgnoreSelector()).length>0&&(t.children().not(this.getIgnoreSelector()).remove(),t.show())}},getIgnoreSelector:function(){var e='.hidden, .hide-if-js, .update-message, [aria-hidden="true"], .hide-notice--ignored';return WP_ADMINIFY_HIDE_NOTICES.settings.css_selector.length>0&&(e+=", "+WP_ADMINIFY_HIDE_NOTICES.settings.css_selector),e},getIgnoreParentSelector:function(){return"#loco-content"},transferNotices:function(){var t=this,i=e("#wpbody-content .wrap").find("div.updated, div.error, div.notice, #message").not(this.getIgnoreSelector());i.each((function(n,a){for(var o=t.system_messages.length,r=0;r<o;r++){var s=t.system_messages[r];a.innerHTML.indexOf(s)>0&&e(a).addClass("notice-system")}(e(a).parent(t.getIgnoreParentSelector()).length||e(a).parent().parent(t.getIgnoreParentSelector()).length)&&i.splice(n,1)}));var n=0,a=this.container;i.each((function(i,o){var r=t.getNoticeType(o),s="system"===r?"wordpress_system_admin_notices":r+"_level_notices",c=WP_ADMINIFY_HIDE_NOTICES.settings[s];if("hide"===c)e(o).remove();else if("popup-only"===c){var d=e(a).find("#adminify-"+r+"-notices");e(o).detach().appendTo(d),n++}}));var o=n;0<e(".adminify-notification-counter").length&&(o+=this.getCurrentCounterValue()),this.updateCounterBubble(o),this.checkMigrationInterval()},updateCounterBubble:function(i){if(0<e(".adminify-notification-counter").length){e(".adminify-notification-counter span.count").html(i)}else{var n=WP_ADMINIFY_HIDE_NOTICES.title;this.counter_link.find("a").html(n);var a='<div class="adminify-notification-counter wp-core-ui wp-ui-notification"><span aria-hidden="true" class="count">'+i+'</span><span class="screen-reader-text">'+i+" "+n+"</span></div>";this.counter_link.attr("data-popup-title",n),this.counter_link.find("a").append(a),this.counter_link.addClass("has-data")}t.notif_count=i},adjustModalHeight:function(){e("#TB_ajaxContent").css({width:"100%",height:e("#TB_window").height()-e("#TB_title").outerHeight()-22+"px",padding:"2px 0px 20px 0px"})},checkNoticeRemoval:function(){if(e("#TB_ajaxContent").height()){var t=e("#TB_ajaxContent").find(".notice").not(":hidden").length;this.getCurrentCounterValue()!==t&&this.updateCounterBubble(t)}else this.removal_interval&&clearInterval(this.removal_interval)},CheckAndStoreNotices:function(){var t=jQuery(this.container).find(".notice"),i=[],n=this;t.each((function(e,t){jQuery(t).find(".adminify-notice-timestap").remove();var n=t.outerHTML;i[e]=n})),jQuery.ajax({type:"POST",dataType:"json",url:WP_ADMINIFY_HIDE_NOTICES.ajaxurl,data:{action:"adminify_log_notices",_wpnonce:WP_ADMINIFY_HIDE_NOTICES.nonce,notices:i},complete:function(i){n.appendTimeDate(t,i.responseJSON.data),e(".adminify-notification-counter").addClass("display")}})},appendTimeDate:function(e,t){var i=this;e.each((function(e,n){if("do-not-display"==t[e]){jQuery(n).remove();var a=i.getCurrentCounterValue()-1;i.updateCounterBubble(a)}else{var o='<div class="adminify-notice-timestap"><span class="adminify-time">'+WP_ADMINIFY_HIDE_NOTICES.date_time_preamble+t[e][1]+'</span><a href="#" data-hide-notice-forever="'+t[e][0]+'">Hide Notice Forever</a></div>';jQuery(n).find(".adminify-notice-timestap").length||jQuery(o).appendTo(n)}}))},initTriggers:function(){var t=this;this.counter_link.click((function(){return 0==t.getCurrentCounterValue()||e("#adminify-container-slide-in").addClass("show"),!1})),e(document).on("click",(function(t){0===e(t.target).closest("#adminify-container-slide-in").length&&e("#adminify-container-slide-in").removeClass("show")})),jQuery(document).on("click","[data-hide-notice-forever]",(function(i){i.preventDefault();var n=jQuery(this).attr("data-hide-notice-forever"),a=jQuery(this).closest(".notice"),o=e(".adminify-notification-counter span.count").text(),r=t;jQuery.ajax({type:"POST",dataType:"json",url:WP_ADMINIFY_HIDE_NOTICES.ajaxurl,data:{action:"adminify_hide_notice_forever",_wpnonce:WP_ADMINIFY_HIDE_NOTICES.nonce,dismiss_notice_hash:n},complete:function(e){a.slideUp();var t=o-1;r.updateCounterBubble(t)}})}))}}).init()}(jQuery,window)})();