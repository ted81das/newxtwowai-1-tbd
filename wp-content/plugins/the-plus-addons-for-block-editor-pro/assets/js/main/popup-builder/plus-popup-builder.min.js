let tpPopupData=new Map;function tppopup(n){n.querySelectorAll(".tpgb-offcanvas-wrapper").forEach(function(t){showuserRest(t);var i=t.querySelector(".scroll-view"),e=t.querySelector(".offcanvas-toggle-btn.position-fixed");t.classList.contains("scroll-view")&&e&&window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop,e=parseInt(i.getAttribute("data-scroll-view")),s=i.getAttribute("data-canvas-id"),s=n.querySelector("."+s);e<t?s.classList.add("show"):s.classList.remove("show")})})}function PlusOffcanvas(t){"use strict";this.wrap=t,this.content=t.querySelector(".tpgb-canvas-content-wrap"),this.button=t.querySelector(".offcanvas-toggle-btn"),this.settings=JSON.parse(this.wrap.dataset.settings),this.id=this.settings.content_id,this.transition=this.settings.transition,this.esc_close=this.settings.esc_close,this.body_click_close=this.settings.body_click_close,this.direction=this.settings.direction,this.trigger=this.settings.trigger,this.onpageLoad=this.settings.onpageLoad,this.onpageloadDelay=this.settings.onpageloadDelay,this.onScroll=this.settings.onScroll,this.onpageviews=this.settings.onpageviews,this.exitinlet=this.settings.exitInlet,this.inactivity=this.settings.inactivity,this.extraclick=this.settings.extraclick,this.prevurl=this.settings.prevurl,this.scrollHeight=this.settings.scrollHeight,this.previousUrl=this.settings.previousUrl,this.extraId=this.settings.extraId,this.inactivitySec=this.settings.inactivitySec,this.showuseRes=this.settings.showuseRes,this.noXTimes=this.settings.noXTimes,this.tpgbXdays=this.settings.days,this.duration=500,this.time=0,this.flag=!0,this.ele=document.querySelector(".tpgb-block-"+this.id+"-canvas"),this.animSetting=this.ele&&this.ele.dataset&&this.ele.dataset.animationsetting?JSON.parse(this.ele.dataset.animationsetting):"",this.destroy(),this.init(),tpPopupData.set(this.id,this.settings)}function showuserRest(t){var e,s,i=JSON.parse(t.getAttribute("data-settings")),n="tpgbXTimeView-"+i.content_id,o=!0;if(i.showuseRes&&"yes"==i.showuseRes&&""!=i.noXTimes&&""!=i.days?(null!=(s=JSON.parse(localStorage.getItem(n)))&&null!=s.xtimeView?(e=Number(s.xtimeView)+1,localStorage.setItem(n,JSON.stringify(Object.assign({},s,{xtimeView:e})))):localStorage.setItem(n,'{ "xtimeView": 1 }'),Number(JSON.parse(localStorage.getItem(n)).xtimeView)<=Number(i.noXTimes)?o=!0:(e=new Date,i=(new Date).setDate(e.getDate()+Number(i.days)),s=localStorage.getItem(n),s=JSON.parse(s),i=Object.assign({},s,{Xdate:i}),null!=s&&null==s.Xdate&&localStorage.setItem(n,JSON.stringify(i)),o=!1,i=localStorage.getItem(n),null!=(i=JSON.parse(i))&&null!=i.Xdate&&new Date(Number(e))>new Date(Number(i.Xdate))&&(localStorage.removeItem(n),o=!0))):localStorage.getItem(n)&&localStorage.removeItem(n),!o)return!1;new PlusOffcanvas(t)}document.addEventListener("DOMContentLoaded",function(){document.body.classList.contains("block-editor-page")||tppopup(document)}),PlusOffcanvas.prototype={id:"",wrap:"",content:"",button:"",settings:{},transition:"",delaytimeout:"",ele:"",duration:400,initialized:!1,animSetting:{},animations:["slide","slide-along","reveal","push","popup"],init:function(){var t="yes"===this.body_click_close?"":"tpgb-pop-outer-none";if(null!=this.wrap){if(document.documentElement.classList.add("tpgb-offcanvas-content-widget"),0===document.querySelectorAll(".tpgb-offcanvas-container").length){var e=document.createElement("div");for(e.className="tpgb-offcanvas-container "+t;document.body.firstChild;)e.appendChild(document.body.firstChild);document.body.appendChild(e)}t=this.wrap.querySelector(".tpgb-canvas-content-wrap");t&&(document.querySelectorAll(".tpgb-offcanvas-container > .tpgb-block-"+this.id+"-canvas").forEach(function(t){t.parentNode.removeChild(t)}),document.querySelectorAll("body > .tpgb-block-"+this.id+"-canvas").forEach(function(t){t.parentNode.removeChild(t)}),document.body.insertBefore(t,document.body.firstChild)),this.bindEvents()}var s=this;document.addEventListener("wpcf7mailsent",function(t){s.destroy()},!1)},destroy:function(){this.close(),this.animations.forEach(function(t){document.documentElement.classList.contains("tpgb-"+t)&&document.documentElement.classList.remove("tpgb-"+t)});document.querySelectorAll(".tpgb-block-"+this.id+"-canvas").length},bindEvents:function(){this.button&&this.trigger&&"yes"===this.trigger&&this.button.addEventListener("click",this.toggleContent.bind(this)),"yes"==this.extraclick&&this.extraId&&""!==this.extraId&&document.querySelectorAll("."+this.extraId).forEach(function(t){t.addEventListener("click",this.toggleContent.bind(this))}.bind(this)),"yes"!==this.onpageLoad&&"yes"!==this.inactivity&&"yes"!==this.prevurl&&"yes"!==this.onpageviews||this.loadShow(),window.addEventListener("scroll",this.scrollShow.bind(this)),document.addEventListener("mouseleave",this.exitInlet.bind(this)),document.body.addEventListener("click",function(t){var e=document.querySelector(".tpgb-offcanvas-close-"+this.id);e&&t.target!=this.button&&t.target!=this.content&&t.target==e&&this.close()}.bind(this)),"yes"===this.esc_close&&this.closeESC(),"yes"===this.body_click_close&&this.closeClick()},triggerClick:function(){"yes"==this.extraclick&&this.extraId&&""!==this.extraId&&this.flag&&document.querySelectorAll("."+this.extraId).forEach(function(t){t.addEventListener("click",this.toggleContent.bind(this))},this)},toggleContent:function(t){var e=this;"yes"==e.extraclick&&e.extraId&&""!==e.extraId&&t.preventDefault(),document.documentElement.classList.contains("tpgb-open")?e.close():e.flag&&e.show()},exitInlet:function(){"yes"==this.exitinlet&&this.flag&&(this.show(),this.flag=!1)},loadShow:function(){function t(t){clearTimeout(e),e=setTimeout(function(){t.show(),t.flag=!1},1e3*t.inactivitySec)}var e;"yes"!=this.onpageLoad&&"yes"!=this.onpageviews||!this.flag||setTimeout(()=>{this.show(),this.flag=!1},"yes"==this.onpageLoad?this.onpageloadDelay:500),"yes"==this.inactivity&&this.flag&&this.inactivitySec&&""!=this.inactivitySec&&(this.flag,document.onmousemove=t(this),document.onkeypress=t(this)),"yes"==this.prevurl&&this.previousUrl&&document.referrer&&this.previousUrl==document.referrer&&this.flag&&setTimeout(()=>{this.show()},500)},scrollShow:function(){var t=this.scrollHeight,e=window.pageYOffset;"yes"===this.onScroll&&this.flag&&t<=e&&(this.show(),this.flag=!1)},AnimIn:function(){!this.ele.classList.contains("tpgb_animated")&&this.animSetting&&void 0!==this.animSetting.anime&&(this.ele.classList.remove("tpgb-view-animation-out","tpgb_animated_out","tpgb_"+this.animSetting.animeOut),this.ele.classList.add("tpgb_animated","tpgb_"+this.animSetting.anime))},AnimOut:function(){document.querySelector(".tpgb-block-"+this.id+"-canvas").classList.contains("tpgb-visible")&&!this.ele.classList.contains("tpgb_animated_out")&&this.animSetting&&void 0!==this.animSetting.animeOut&&(this.ele.classList.remove("tpgb_animated","tpgb_"+this.animSetting.anime),this.ele.classList.add("tpgb_"+this.animSetting.animeOut,"tpgb-view-animation-out","tpgb_animated_out"))},show:function(){var t=document.querySelector(".tpgb-block-"+this.id+"-canvas"),e=document.documentElement;t.classList.add("tpgb-visible"),e.classList.add("tpgb-"+this.transition),e.classList.add("tpgb-"+this.direction),e.classList.add("tpgb-open"),e.classList.add("tpgb-block-"+this.id+"-canvas-open"),e.classList.add("tpgb-reset"),this.button&&this.button.classList.add("tpgb-is-active"),this.AnimIn()},close:function(){var t=document.querySelector(".tpgb-block-"+this.id+"-canvas"),e=document.documentElement,s=this.button||"";t.classList.contains("tpgb-slide-along")?(this.delaytimeout=0,t.classList.remove("tpgb-visible")):this.delaytimeout=this.animSetting&&this.animSetting.custoutDur?1e3*this.animSetting.custoutDur:500,setTimeout(function(){e.classList.remove("tpgb-block-"+this.id+"-canvas-open"),e.classList.remove("tpgb-open"),e.classList.remove("tpgb-reset"),e.classList.remove("tpgb-"+this.transition),e.classList.remove("tpgb-"+this.direction),t.classList.contains("tpgb-slide-along")||t.classList.remove("tpgb-visible")}.bind(this),this.delaytimeout),this.button&&s.classList.remove("tpgb-is-active"),this.AnimOut()},closeESC:function(){var e=this;""!==e.settings.esc_close&&document.addEventListener("keydown",function(t){27===t.keyCode&&e.close()})},closeClick:function(){var c=this;document.addEventListener("click",function(t){var e=[];tpPopupData.forEach(function(t){t.extraclick&&"yes"==t.extraclick&&t.extraId&&""!==t.extraId&&c.flag&&e.push("."+t.extraId)});var s=t.target,i=s.matches(".tpgb-canvas-content-wrap")||s.closest(".tpgb-canvas-content-wrap"),n=s.matches(".off-can-img-svg"),o=s.matches(".close-custom_img"),a=s.matches(".offcanvas-toggle-btn"),t=e.some(function(t){return s.matches(t)||s.closest(t)});(i||n||a||t)&&!o||c.close()})}};