function tpsocialFeed(y){let t=y.querySelectorAll(".tpgb-social-feed");t&&t.forEach(d=>{let e=d.getAttribute("data-id"),t=d.getAttribute("data-fancy-option")?JSON.parse(d.getAttribute("data-fancy-option")):"",c=d.getAttribute("data-scroll-normal")?JSON.parse(d.getAttribute("data-scroll-normal")):"",o={Carousel:{infinite:t.loop,transition:t.transitionEffect},Toolbar:{display:{right:t.button}},contentClick:t.clickContent};t.arrows||(o.Carousel.Navigation=!1),o.Thumbs=!1,Fancybox.bind('[data-fancybox="'+e+'"]',o);let a=d.querySelectorAll(".grid-item.feed-Facebook");if(a&&a.forEach(t=>{t=t.getAttribute("data-index");Fancybox.bind('[data-fancybox="album-'+t+"-"+e+'"]',o)}),c&&!0===c.ScrollOn&&!1===c.TextLimit){let t=d.querySelectorAll(".tpgb-message");t&&t.forEach(function(t){t.clientHeight>=c.Height&&(t.classList.add(c.className),t.style.height=c.Height+"px")})}if(!0===c.FancyScroll&&!1===c.TextLimit){let t=d.querySelectorAll(".fancybox-si .tpgb-message");t.forEach(function(t){t.classList.add(c.Fancyclass),t.style.height=c.FancyHeight+"px"})}document.addEventListener("click",function(t){!function e(t){var o=t.target;{var a,n,s,i,l;o.classList.contains("readbtn")&&o.closest(".tpgb-social-feed")&&(t.stopImmediatePropagation(),a=o.closest(".tpgb-social-feed"),n=o.getAttribute("aria-label"),l=o.closest(".tpgb-message"),t=l.closest(".tpgb-isotope .post-loop-inner"),s=c,i=l.querySelector(".showtext"),l.classList.contains("show-text")?(l.classList.remove("show-text","show-less"),o.innerHTML=n,l.querySelector(".sf-dots").style.display="inline",!0===s.ScrollOn&&!0===s.TextLimit&&(i.classList.remove(s.className),i.removeAttribute("style"))):(l.classList.add("show-text","show-less"),o.innerHTML="Show Less",l.querySelector(".sf-dots").style.display="none",l=d.querySelectorAll(".showtext"),!0===s.ScrollOn&&!0===s.TextLimit&&l&&l.forEach(function(t){t.clientHeight>=s.Height&&(i.classList.add(s.className),i.style.height=s.Height+"px")})),t&&new Isotope(t,{itemSelector:".grid-item",resizable:!0,sortBy:"original-order"}).layout())}if(o.classList.contains("readbtn")&&o.closest(".fancybox-si")){let t=o.closest(".tpgb-message");var r=c;let e=o.closest(".tpgb-message");t.classList.contains("show-text")?(t.classList.remove("show-text","show-less"),o.innerHTML="Show More",t.querySelector(".sf-dots").style.display="inline","true"===r.FancyScroll&&"true"===r.TextLimit&&(e.classList.remove(r.Fancyclass),e.removeAttribute("style"))):(t.classList.add("show-text","show-less"),o.innerHTML="Show Less",t.querySelector(".sf-dots").style.display="none","true"===r.FancyScroll&&"true"===r.TextLimit&&Array.from(e).forEach(function(t){t.clientHeight>=r.FancyHeight&&(t.classList.add(r.Fancyclass),t.style.height=r.FancyHeight+"px")}))}this.removeEventListener("click",t=>{e(t)})}(t)});let u=d.querySelector(".feed-load-more");u&&u.addEventListener("click",function(t){t.preventDefault();let e=u.getAttribute("data-loadattr"),s=u.getAttribute("data-display"),i=u.getAttribute("data-loadview"),o=u.getAttribute("data-loadclass"),l=u.getAttribute("data-layout"),a=u.getAttribute("data-loadingtxt"),r=u.textContent,c=t.currentTarget.closest(".tpgb-block-"+o);u.dataset.requestRunning&&"true"==u.dataset.requestRunning||(u.dataset.requestRunning="true",u.textContent=a,fetch(tpgb_config&&tpgb_config.ajax_url?tpgb_config.ajax_url:tpgb_load.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"action=tpgb_feed_load&view="+s+"&loadFview="+i+"&loadattr="+e}).then(function(t){return t.json()}).then(function(t){var e=t&&t.HTMLContent?t.HTMLContent:"",o=t&&t.totalFeed?t.totalFeed:"",a=t&&t.FilterStyle?t.FilterStyle:"",n=t&&t.allposttext?t.allposttext:"";""==t?u.classList.add("hide"):(t=c.querySelector(".all .tpgb-category-count"),c.querySelector(".post-loop-inner").insertAdjacentHTML("beforeend",e),e=c.querySelectorAll(".grid-item").length,t&&(t.innerHTML="",t.insertAdjacentHTML("beforeend",e)),"style-2"!=a&&"style-3"!=a||(a=d.querySelectorAll(".tpgb-filter-list .tpgb-category-list:not(.all)"))&&a.forEach(function(t){var e=t.querySelector("span:nth-child(2)").dataset.hover,e=c.querySelectorAll(".grid-item."+e).length;t.querySelector("span:nth-child(1).tpgb-category-count").innerHTML="",t.querySelector("span:nth-child(1).tpgb-category-count").insertAdjacentHTML("beforeend",e)}),"grid"!=l&&"masonry"!=l||d.classList.contains("tpgb-isotope")&&"function"==typeof tppoMaso&&tppoMaso(y),o<=e?(u.classList.add("hide"),u.parentNode.insertAdjacentHTML("beforeend",'<div class="tpgb-feed-loaded">'+n+"</div>")):u.textContent=r),s=Number(s)+Number(i),u.setAttribute("data-display",s)}).finally(function(){u.dataset.requestRunning="false","grid"!=l&&"masonry"!=l||"function"!=typeof tppoMaso||d.classList.contains("tpgb-isotope")&&tppoMaso(y),c.classList.contains("tpgb-isotope")&&("grid"!=l&&"masonry"!=l||c.querySelectorAll(".tpgb-carousel:not(.is-initialized)").forEach(function(t){"function"==typeof splide_init&&splide_init(t)}))}))});let n=d.querySelector(".tpgb-feed-lazy-load");var s,i,l,r,p,g,f;n&&d.classList.contains("tpgb-isotope")&&(g=window,(f=function(){g.innerWidth,s=g.innerHeight,i=document.querySelector("body").offsetHeight,r=d.offsetHeight,p=d.offsetTop+50,setTimeout(function(){r=d.offsetHeight,p=d.offsetTop+50},50)})(),g.addEventListener("resize",f),g.addEventListener("scroll",function(t){if(t.preventDefault(),f(),l=g.pageYOffset,r=d.offsetHeight,p=d.offsetTop+50,d.querySelector(".tpgb-feed-lazy-load")&&l<i&&r+p-s<l+60){let s=n.querySelector(".feed-lazy-load"),t=s.dataset.lazyattr,e=s.dataset.totalfeed,i=s.getAttribute("data-display"),l=s.dataset.lazyview,o=s.dataset.lazyclass,r=s.dataset.lazylayout,c=s.innerHTML,d=s.closest(".tpgb-block-"+o);s.dataset.requestRunning&&"true"==s.dataset.requestRunning||(s.dataset.requestRunning="true",Number(e)>=Number(i)&&fetch(tpgb_config&&tpgb_config.ajax_url?tpgb_config.ajax_url:tpgb_load.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"action=tpgb_feed_load&view="+i+"&loadFview="+l+"&loadattr="+t}).then(function(t){return t.json()}).then(function(t){var e=t&&t.HTMLContent?t.HTMLContent:"",o=t&&t.totalFeed?t.totalFeed:"",a=t&&t.FilterStyle?t.FilterStyle:"",n=t&&t.allposttext?t.allposttext:"";""===t?s.classList.add("hide"):(t=d.querySelector(".all .tpgb-category-count"),d.querySelector(".post-loop-inner").insertAdjacentHTML("beforeend",e),e=d.querySelectorAll(".grid-item").length,t&&(t.innerHTML="",t.appendChild(document.createTextNode(e))),"style-2"!==a&&"style-3"!==a||(a=d.querySelectorAll(".tpgb-filter-list .tpgb-category-list:not(.all)"))&&a.forEach(function(t){var e=t.querySelector("span:nth-child(2)").dataset.hover,e=d.querySelectorAll(".grid-item."+e).length;t.querySelector("span:nth-child(1).tpgb-category-count").innerHTML="",t.querySelector("span:nth-child(1).tpgb-category-count").appendChild(document.createTextNode(e))}),"grid"!==r&&"masonry"!==r||"function"!=typeof tppoMaso||d.classList.contains("tpgb-isotope")&&tppoMaso(y),e>=Number(o)?s.nextElementSibling&&s.nextElementSibling.classList.contains("tpgb-feed-loaded")||(s.classList.add("hide"),(o=document.createElement("div")).classList.add("tpgb-feed-loaded"),o.innerHTML=n,s.parentNode.appendChild(o)):s.innerHTML=c),i=Number(i)+Number(l),s.setAttribute("data-display",i)}).finally(function(){s.dataset.requestRunning="false"}).then(function(){d.classList.contains("tpgb-isotope")&&("grid"!==r&&"masonry"!==r||"function"!=typeof tppoMaso||tppoMaso(y),d.querySelectorAll(".tpgb-carousel:not(.is-initialized)").forEach(function(t){"function"==typeof splide_init&&splide_init(t)}))}))}}))})}document.addEventListener("DOMContentLoaded",()=>{tpsocialFeed(document)});